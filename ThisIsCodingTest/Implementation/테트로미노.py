# BAEKJOON 테트로미노

n, m = map(int, input().split())
board = []
tetromino = [
        [(0,0), (0,1), (0,2), (0,3)],
        [(0,0), (1,0), (2,0), (3,0)],
        [(0,0), (0,1), (1,0), (1,1)],
        [(0,0), (1,0), (2,0), (2,1)],
        [(0,1), (1,1), (2,1), (2,0)],
        [(0,0), (0,1), (1,0), (2,0)],
        [(0,0), (0,1), (1,1), (2,1)],
        [(0,0), (0,1), (0,2), (1,0)],
        [(0,0), (0,1), (0,2), (1,2)],
        [(0,0), (1,0), (1,1), (1,2)],
        [(1,0), (1,1), (1,2), (0,2)],
        [(0,0), (0,1), (0,2), (1,1)],
        [(0,1), (1,0), (1,1), (1,2)],
        [(0,1), (1,0), (1,1), (2,1)],
        [(0,0), (1,0), (1,1), (2,0)],
        [(0,0), (1,0), (1,1), (2,1)],
        [(1,0), (1,1), (0,1), (0,2)],
        [(0,0), (0,1), (1,1), (1,2)],
        [(0,1), (1,1), (1,0), (2,0)]
        ]
answer = 0 

for i in range(n):
    numbers = list(map(int, input().split()))
    board.append(numbers)

for t in tetromino:
    for i in range(n):
        for j in range(m):
            sum_ = 0
            try:
                sum_ += (board[i+t[0][0]][j+t[0][1]] + board[i+t[1][0]][j+t[1][1]] + board[i+t[2][0]][j+t[2][1]] + board[i+t[3][0]][j+t[3][1]])
                answer = max(sum_, answer)
            except:
                continue

print(answer)
